#!/usr/bin/env node

'use strict'

const commander = require('commander')
const { run } = require('../lib/lint-links.js')

process.title = 'link-checker'

function collect (value, previous) {
  return previous.concat([value])
}

const program = new commander.Command()
  .arguments('<dir>')
  .option('-r, --redirect <from=to>', 'a redirection from source to dest directory', collect, [])
  .option('--static <route=staticRootDir>', 'static assets directory')
  .option('--skip-file <file>', 'a file that contains a list of URLs to skip (one regular expression per line)')
  .action((dir) => {
      run(dir, program.opts())
  })

program.parse(process.argv)
